---
objectID: validators|chain-upgrade
title: Perform a chain upgrade
parentSection: Run a node
description: Learn how to perform a chain upgrage
---

# Perform a chain upgrade

In this guide, we will go through upgrading your node during network upgrades, chain halt upgrades and hard forks. Depending on if you are using [Cosmovisor](/validators/running-a-node/cosmovisor) or not, there are key differences:

## Using cosmovisor vs. not using cosmovisor

- **Using Cosmovisor:** Cosmovisor is an upgrade manager for Cosmos SDK-based blockchains. It lets you automatically switch to the new binary when the specified block height for the upgrade is reached. Additionally, you can enable cosmovisor to download the upgrade automatically. In any case, for hard forks, you will still need to replace the genesis file manually.

- **Not Using Cosmovisor:** If you are not using Cosmovisor, you are responsible for manually managing the upgrade process. This involves downloading, verifying, and extracting the new binary, and restarting the node once the specified block height is reached. Similarly to when using cosmovisor, for hard forks you will need to replace the genesis file manually.

In either case, make sure to monitor the upgrade details on <a href="https://discord.gg/archwayhq" target="_blank">Discord</a> or keep abreast of upgrade proposals via the [block explorer](/resources/blockexplorers). It is recommended to stay updated on the exact block height for upgrades, in case specific steps are required.

## Network Upgrades

### With cosmovisor (automatic download enabled)

If you enable Cosmovisor to automatically perform binary downloads, only the following steps are required:

- Monitor the upgrade details on <a href="https://discord.gg/archwayhq" target="_blank">Discord</a> or keep abreast of upgrade proposals via the [block explorer](/resources/blockexplorers) for the respective network to stay updated on the exact block height for the upgrade and any additional steps required.

- Cosmovisor will automatically switch to the new binary when the specified block height is reached.

Please make sure to always be aware of upocoming upgrades even if you enabled the automatic download, so you can make sure you are aware of any risks.

### With cosmovisor (manual download)

If you are using cosmovisor with the automatic download disabled, you will need to download the binary manually. In this scenario, the steps would be:

- Monitor the upgrade details on <a href="https://discord.gg/archwayhq" target="_blank">Discord</a> or keep abreast of upgrade proposals via the [block explorer](/resources/blockexplorers) for the respective network to stay updated on the exact block height for the upgrade and any additional steps required.

- Download the updated binary by following the instructions below:

To Download the updated binary, create a directory with the name corresponding to the version number of archwayd being upgraded to (e.g., 0.x.y):


::highlight-card
```bash
mkdir -p "${HOME}"/.archwayd/upgrades/0.x.y/bin
```
::

Navigate to the new directory and download the new release:

::highlight-card
```bash
cd "${HOME}"/.archwayd/upgrades/0.x.y/bin
wget -O archway.zip https://github.com/archway-network/archway/releases/download/v1.0.0-rc.1/archwayd_v1.0.0-rc.1_linux_arm64.zip
```
::

Verify the download: Each release has an associated SHA256 file to verify that the downloaded file is correct. Generate the SHA256 hash for the downloaded file using:

::highlight-card
```bash
sha256sum archway.zip
```
::

Download the SHA256 file connected to the release file:

::highlight-card
```bash
wget -O archwaysha256.txt https://github.com/archway-network/archway/releases/download/v1.0.0-rc.1/archwayd_v1.0.0-rc.1_checksums.txt

```
::

Compare both SHA256 hash strings, and if they match, the downloaded file matches the actual release file.


Extract the binary: Unzip the binary in the "${HOME}"/.archwayd/upgrades/0.x.y/bin folder using:

::highlight-card
```bash
unzip archway.zip
```
::

Stop the node: Stop your node before the specified block height is reached:

::highlight-card
```bash
sudo systemctl stop archwayd
```
::

Replace the old binary with the new one, for example:

::highlight-card
```bash
cp "${HOME}"/.archwayd/upgrades/0.x.y/bin/archwayd /usr/local/bin/

```
::


Restart the node: Restart your node to complete the process:

::highlight-card
```bash
sudo systemctl start archwayd

```
::

## Hard forks

The process for hard forks is similar to the one for [Network upgrades](#network-upgrades) but includes additional steps for replacing the genesis file.


When using cosmovisor, the process slightly differs depending on the following scenarios:

- If you have allow the automatic upgrades, you would just need to [Replace the genesis file](#replace-the-genesis-file).

- If you disable automatic upgrades, then you would need to:

    -   Download the updated binary, extract it and replace it. Make sure to check the sha256 checksum.

    - [Replace the genesis file](#replace-the-genesis-file).


### Replace the genesis file

First, download the new genesis file to your local machine. The genesis file for each respective network can be found on the [Networks](/resources/networks) page.

For example, you can download the genesis file for **constantine-3** with:

::highlight-card
```bash
wget genesis.json https://github.com/archway-network/networks/blob/main/constantine-3/genesis.json
```
::

Before replacing the current genesis file, it's good practice to create a backup. Navigate to the directory containing the genesis file (usually located in the config folder) and create a backup:

::highlight-card
```bash
cd ~/.archwayd/config
cp genesis.json genesis.json.backup

```
::

Replace the current genesis file with the new one you downloaded earlier. Assuming you have downloaded the new genesis file as **new-genesis.json**, you can replace the existing file using the following command:

::highlight-card
```bash
cp /path/to/new-genesis.json ~/.archwayd/config/genesis.json

```
::


Make sure to replace **/path/to/new-genesis.json** with the actual path to the new genesis file.

You will now need to reset your node's data to start with the new genesis file. You can do this using the following command:

::highlight-card
```bash
archwayd unsafe-reset-all
```
::


If you have already updated the binary (either manually or through Cosmovisor), you can now restart your node to complete the process:

::highlight-card
```bash
sudo systemctl restart archwayd
```
::

Keep in mind that the process of replacing the genesis file is the same whether you are using Cosmovisor or not. Cosmovisor only helps automate the binary upgrade, while replacing the genesis file remains a manual process.




## Chain Halt Upgrades

Chain halt upgrades are a specific type of upgrade process triggered by the discovery of a critical protocol bug that necessitates an urgent chain upgrade. Unlike regular upgrades, these don't wait for a governance proposal due to the immediate need for a fix.

The workflow for a chain halt upgrade involves the following steps:

- Validators and node operators shut the node down.
- Download a new **archwayd** binary and replace the old one on the node.
- Restart the node.


### Shutting down the node

The first step in a chain halt upgrade is for all validators and node operators to stop their node's operation. This is an essential step to prevent any further spread the consequences of the issue across the network. 

If you are running **archwayd** as a service, you can launch: 
::highlight-card

```bash
sudo systemctl stop archwayd
```
::

### Download and Replace the Binary
Similarly to [network upgrades](#with-cosmovisor-manual-download), you can download the new archway binary from the <a href="https://github.com/archway-network/archway/releases" target="_blank">release page</a> and replace the old one on the node:

::highlight-card
```bash

wget -O archway.zip https://github.com/archway-network/archway/releases/download/v1.0.0-rc.1/archwayd_v1.0.0-rc.1_linux_amd64.zip
```
::

Verify the download, by:
- Generating the SHA256 hash for the downloaded file:

::highlight-card
```bash
sha256sum archway.zip
```
::

- Downloading the SHA256 file connected to the release file:

::highlight-card
```bash
wget -O archwaysha256.txt https://github.com/archway-network/archway/releases/download/v1.0.0-rc.1/archwayd_v1.0.0-rc.1_checksums.txt

```
::

- Comparing that the SHA256 hash strings match, as this ensures that the downloaded file matches the actual release file.



You can now extract the new binary and replace the old one, for example:

::highlight-card

```bash
unzip archway.zip
cp "${HOME}"/.archwayd/upgrades/0.x.y/bin/archwayd /usr/local/bin/
```
::


### Restart the Node
After the new binary has been installed, you can restart your node:

::highlight-card

```bash

sudo systemctl start archwayd
```
::
